<div class="mt-3 mb-3">
  <h5>{{ 'MANAGE_CHECKS' | translate }}</h5>
  <span class="text-muted">
      {{ 'DASHBOARD' | translate }} <i [ngClass]="'fa-solid ' + ('ICON_CLASS' | translate)"></i> {{ 'CHECKS_MANAGEMENT' | translate }} <i [ngClass]="'fa-solid ' + ('ICON_CLASS' | translate)"></i> {{ 'CREATE_OPERATION_ON_CHECK' | translate }}
  </span>
</div>
<div class="mt-4 mb-4">
  <form [formGroup]="checkOerationForm" (ngSubmit)="handleForm()">
      <div class="container">
          <div class="row">
              <div class="col-md-12">
                  <div class="card shadow em-card rounded-lg">
                      <div class="card-header bg-white text-black rounded-top pt-3 ">
                          <h5>{{ 'CHECK_OPERATION_DETAILS' | translate }}</h5>
                      </div>
                      <div class="card-body pb-5">
                          <div class="row">
                              <div class="form-group col-md-6">
                                  <label class="form-label">{{ 'SELECT_TYPE' | translate }}</label>
                                  <select class="form-control" formControlName="type" (change)="onTypeChange($event)">
                                      <option *ngFor="let operation of operations; let i = index" [value]="i">{{i}}: {{operation}}</option>
                                  </select>
                              </div>
                              <div *ngIf="needRequiredAccount" class="form-group col-md-6">
                                  <label class="form-label">{{ 'SELECT_ACCOUNT' | translate }}</label>
                                  <select class="form-control" formControlName="requiredAccount" (change)="onRequiredAccountChange($event)">
                                      <option *ngFor="let account of requiredAcounts; let i = index" [value]="account.id">{{i}}: {{account.name_ar}}</option>
                                  </select>
                              </div>
                              <div *ngIf="checks.length" class="form-group col-md-12">
                                  <label class="form-label">{{ 'SELECT_CHECK' | translate }}</label>
                                  <select class="form-control" formControlName="check" (change)="onCheckChange($event)">
                                      <option *ngFor="let check of checks; let i = index" [value]="check.id"> ({{check.id}}){{check.check_number}} || {{check.due_date}} || {{check.amount}}</option>
                                  </select>
                              </div>
                              <div *ngIf="needReasone" class="form-group col-md-12">
                                  <label for="reasone" class="form-label">{{ 'REASON' | translate }}</label>
                                  <input id="reasone" formControlName="reasone" type="text" class="form-control" placeholder="{{ 'REASON' | translate }}" />
                              </div>
                              <div *ngIf="selectedCheck" class="form-group col-md-6 mt-3 ">
                                  <a (click)="addItem()" class="btn btn-success">{{ 'ADD' | translate }}</a>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="col-md-12">
                  <div class="card shadow em-card rounded-lg">
                      <div class="card-header bg-white text-black rounded-top pt-3 ">
                          <h5>{{ 'ENTRY_DOCUMENT_DETAILS' | translate }}</h5>
                      </div>
                      <div class="card-body pb-5">
                          <div *ngFor="let item of entryItems" class="row">
                              <div class="col-md-5">
                                  name: {{item.debitor.name_ar}} || id: {{item.debitor.id}}
                              </div>
                              <div class="col-md-2">
                                  {{item.amount}}
                              </div>
                              <div class="col-md-5">
                                  name: {{item.creditor.name_ar}} || id: {{item.creditor.id}}
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="row mt-5">
              <div class="col-md-12">
                  <div class="card shadow em-card rounded-lg">
                      <div class="card-header bg-white text-black rounded-top pt-3 ">
                          <h5>{{ 'ADDITIONAL_INFORMATION' | translate }}</h5>
                      </div>
                      <div class="card-body pb-5">
                          <div class="row">
                              <div class="form-group col-md-6">
                                  <label for="manual_reference" class="form-label">{{ 'MANUAL_REFERENCE' | translate }}</label>
                                  <input id="manual_reference" formControlName="manual_reference" type="text" class="form-control" placeholder="{{ 'MANUAL_REFERENCE' | translate }}" />
                                  <div class="alert alert-danger" *ngIf="checkOerationForm.get('manual_reference')?.touched && checkOerationForm.get('manual_reference')?.hasError('maxLength')">
                                      Max length is 255 characters.
                                  </div>
                              </div>
                              <div class="form-group col-md-6">
                                  <label for="date" class="form-label">{{ 'DATE' | translate }}</label>
                                  <input id="date" formControlName="date" type="date" class="form-control" />
                                  <div class="alert alert-danger" *ngIf="checkOerationForm.get('date')?.touched && checkOerationForm.get('date')?.hasError('required')">
                                      Date is required.
                                  </div>
                              </div>
                              <div class="form-group col-md-6">
                                  <label for="organization" class="form-label">{{ 'ORGANIZATION' | translate }}</label>
                                  <input id="organization" formControlName="organization" type="text" class="form-control" placeholder="{{ 'ORGANIZATION' | translate }}" />
                              </div>
                              <div class="form-group col-md-6">
                                  <label for="currency_id" class="form-label">{{ 'CURRENCY' | translate }}</label>
                                  <select id="currency_id" formControlName="currency_id" class="form-control">
                                      <option *ngFor="let currency of currencies" [value]="currency.id">{{ currency.currency_name_ar }}</option>
                                  </select>
                              </div>
                              <div class="form-group col-md-6">
                                  <label for="delegate_id" class="form-label">{{ 'DELEGATE' | translate }}</label>
                                  <select id="delegate_id" formControlName="delegate_id" class="form-control">
                                      <option *ngFor="let delegate of delegates" [value]="delegate.id">{{ delegate.name }}</option>
                                  </select>
                              </div>
                              <div class="form-group col-md-12">
                                  <label for="note" class="form-label">{{ 'NOTE' | translate }}</label>
                                  <textarea id="note" formControlName="note" class="form-control" rows="3" placeholder="{{ 'NOTE' | translate }}"></textarea>
                                  <div class="alert alert-danger" *ngIf="checkOerationForm.get('note')?.touched && checkOerationForm.get('note')?.hasError('maxLength')">
                                      Max length is 255 characters.
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="mt-4 mb-4">
              <button [disabled]="checkOerationForm.invalid" type="submit" class="btn btn-primary px-4">
                  <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i> {{ 'SAVE' | translate }}
              </button>
          </div>
      </div>
  </form>
</div>